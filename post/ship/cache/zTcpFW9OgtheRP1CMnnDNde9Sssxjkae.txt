module.exports.config = {
    name: 'nasa',
    version: 'beta',
    hasPermssion: 0,
    credits: 'DC-Nam',// th·ªùi ti·∫øt t·ª´ v·ªá tinh NASA
    description: 'T·ª± ƒë·ªông g·ª≠i tin nh·∫Øn theo gi·ªù ƒë√£ c√†i',
    commandCategory: 'Ti·ªán √≠ch',
    usages: '[]',
    cooldowns: 3
};
const nam = [{
    timer: '7:00:00 AM',
    message: ['\n{abc}']
},
             {
               timer: '11:00:00 PM',
    message: ['Ch√∫c m·ªçi ng∆∞·ªùi ng·ªß ngon üò¥', 'Khuya r√πi ng·ªß ngon nh√© c√°c b·∫°n üòá']
},
{
    timer: '1:00:00 PM',
    message: ['Ch√∫c m·ªçi ng∆∞·ªùi bu·ªïi chi·ªÅu vui v·∫ª üôå', 'Ch√∫c m·ªçi ng∆∞·ªùi bu·ªïi chi·ªÅu ƒë·∫ßy nƒÉng l∆∞·ª£ng üòº']
},
{
    timer: '6:30:00 AM',
    message: ['Ch√∫c m·ªçi ng∆∞·ªùi bu·ªïi s√°ng vui v·∫ª üòâ', 'Bu·ªïi s√°ng ƒë·∫ßy nƒÉng l∆∞·ª£ng nha c√°c b·∫°n üòô']
},
{
    timer: '11:30:00 AM',
    message: ['Ch√∫c m·ªçi ng∆∞·ªùi bu·ªïi tr∆∞a vui v·∫ª üòã', 'C·∫£ s√°ng m·ªát m·ªèi r√πi ngh·ªâ ng∆°i n·∫°p nƒÉng l∆∞·ª£ng n√†o üò¥']
}];
module.exports.onLoad = o => setInterval(async() => {
    const r = a => a[Math.floor(Math.random()*a.length)];
    if (√° = nam.find(i => i.timer == new Date(Date.now()+25200000).toLocaleString().split(/,/).pop().trim())){
    const axios = require('axios');
    const res = await axios.get(`https://api.popcat.xyz/weather?q=${encodeURI('H·ªì Ch√≠ Minh')}`);
  var thu = `${res.data[0].current.day}`
  if (thu == 'Sunday') thu = 'Ch·ªß Nh·∫≠t'
  if (thu == 'Monday') thu = 'Th·ª© Hai'
  if (thu == 'Tuesday') thu = 'Th·ª© Ba'
  if (thu == 'Wednesday') thu = 'Th·ª© T∆∞'
  if (thu == 'Thursday') thu = 'Th·ª© NƒÉm'
  if (thu == 'Friday') thu = 'Th·ª© S√°u'
  if (thu == 'Saturday') thu = 'Th·ª© B·∫£y'
  var lo = `${res.data[0].current.skytext}`
  if (lo == 'Sunny') lo = 'Tr·ªùi n·∫Øng'
  if (lo == 'Mostly Sunny') lo = 'Nhi·ªÅu n·∫Øng'
  if (lo == 'Partly Sunny') lo = 'N·∫Øng v√†i n∆°i'
  if (lo == 'Rain Showers') lo = 'M∆∞a r√†o'  
  if (lo == "T-Storms") lo = 'C√≥ b√£o'
  if (lo == 'Light Rain') lo = 'M∆∞a nh·ªè'
  if (lo == 'Mostly Cloudy') lo = 'Tr·ªùi nhi·ªÅu m√¢y'
  if (lo == 'Rain') lo = 'Tr·ªùi m∆∞a'
  if (lo == 'Heavy T-Storms') lo = 'B√£o l·ªõn'
  if (lo == 'Partly Cloudy') lo = 'M√¢y r·∫£i r√°c'
  if (lo == 'Mostly Clear') lo = 'Tr·ªùi trong xanh'
  if (lo == 'Cloudy') lo = 'Tr·ªùi nhi·ªÅu m√¢y'
  if (lo == 'Clear') lo = 'Tr·ªùi trong xanh, kh√¥ng m√¢y'
    var abc = `C·∫≠p nh·∫≠t th·ªùi ti·∫øt t·∫°i ${res.data[0].location.name}\n‚Üí V√†o l√∫c: ${thu} ${res.data[0].current.date}\n‚Üí Nhi·ªát ƒë·ªô: ${res.data[0].current.temperature}¬∞${res.data[0].location.degreetype}\n‚Üí D·ª± b√°o: ${lo}\n‚Üí ƒê·ªô ·∫©m: ${res.data[0].current.humidity}‚ÑÖ\n‚Üí H∆∞·ªõng gi√≥: ${res.data[0].current.winddisplay}\n‚Üí Ghi nh·∫≠n t·ª´ v·ªá tinh l√∫c: ${res.data[0].current.observationtime} t·ª´ tr·∫°m ki·ªÉm so√°t v≈© tr·ª• NASA\n‚Üí D√πng l·ªánh nasa < t·ªânh/th√†nh ph·ªë > ƒë·ªÉ xem chi ti·∫øt c·ªßa nh·ªØng ng√†y k·∫ø ti·∫øp`;
      
   global.data.allThreadID.forEach(i => o.api.sendMessage(r(√°.message).replace(/{abc}/g, abc), i));
    };
}, 1000);

module.exports.run = async o => {
  try{
  const axios = global.nodemodule["axios"];
  const fs = global.nodemodule["fs-extra"];
  const request = global.nodemodule["request"];
  const { api, event, args } = o;
	const { threadID, messageID } = event;
  var nasa = args.join(" ");
  if(!nasa) return api.sendMessage("Vui l√≤ng nh·∫≠p t·ªânh ho·∫∑c th√†nh ph·ªë c·∫ßn xem", threadID);
  const res = await axios.get(`https://api.popcat.xyz/weather?q=${encodeURI(nasa)}`);
  const nasaa = res.data[0].forecast;
  var text = `Th·ªùi ti·∫øt c·ªßa: ${nasa} v√†o c√°c ng√†y`;
  for (let i = 0; i < 5; i++) {
      var thu = nasaa[i].day
  if (thu == 'Sunday') thu = 'Ch·ªß Nh·∫≠t'
  if (thu == 'Monday') thu = 'Th·ª© Hai'
  if (thu == 'Tuesday') thu = 'Th·ª© Ba'
  if (thu == 'Wednesday') thu = 'Th·ª© T∆∞'
  if (thu == 'Thursday') thu = 'Th·ª© NƒÉm'
  if (thu == 'Friday') thu = 'Th·ª© S√°u'
  if (thu == 'Saturday') thu = 'Th·ª© B·∫£y'
  var lo = nasaa[i].skytextday
  if (lo == 'Sunny') lo = 'Tr·ªùi n·∫Øng'
  if (lo == 'Mostly Sunny') lo = 'Nhi·ªÅu n·∫Øng'
  if (lo == 'Partly Sunny') lo = 'N·∫Øng v√†i n∆°i'
  if (lo == 'Rain Showers') lo = 'M∆∞a r√†o'  
  if (lo == "T-Storms") lo = 'C√≥ b√£o'
  if (lo == 'Light Rain') lo = 'M∆∞a nh·ªè'
  if (lo == 'Mostly Cloudy') lo = 'Tr·ªùi nhi·ªÅu m√¢y'
  if (lo == 'Rain') lo = 'Tr·ªùi m∆∞a'
  if (lo == 'Heavy T-Storms') lo = 'B√£o l·ªõn'
  if (lo == 'Partly Cloudy') lo = 'M√¢y r·∫£i r√°c'
  if (lo == 'Mostly Clear') lo = 'Tr·ªùi trong xanh'
  if (lo == 'Cloudy') lo = 'Tr·ªùi nhi·ªÅu m√¢y'
  if (lo == 'Clear') lo = 'Tr·ªùi trong xanh, kh√¥ng m√¢y'
    text += `\n${i+1}. ${thu} ${nasaa[i].date}\n‚Üí Nhi·ªát ƒë·ªô d·ª± b√°o: t·ª´ ${nasaa[i].low}¬∞C ‚ûù ${nasaa[i].high}¬∞C\n‚Üí D·ª± b√°o: ${lo}\n‚Üí T·ªâ l·ªá m∆∞a: ${nasaa[i].precip}‚ÑÖ\n`
  };
   api.sendMessage(text, threadID, messageID)
  }catch(err){api.sendMessage(`${err}`, threadID)}
  }